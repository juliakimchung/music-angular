var nodeunit = require('../lib/nodeunit');


exports.testFailingLog = function (test) {
    test.expect(3);

    // this is meant to bubble to the top, and will be ignored for the purposes
    // of testing:
    var ignored_error = new Error('ignore this callback error');
    var err_handler = function (err) {
        if (err && err.message !== ignored_error.message) {
            throw err;
        }
    };
    process.addListener('uncaughtException', err_handler);

    // A failing callback should not aff